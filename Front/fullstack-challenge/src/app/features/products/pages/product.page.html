<div class="surface-0 p-4 min-h-screen">
    <div class="text-900 text-2xl font-bold mb-4">Gesti√≥n de Productos</div>
  
    <div class="flex justify-content-end mb-3">
      <button pButton label="Nuevo Producto" icon="pi pi-plus" class="p-button-success" (click)="openNew()"></button>
    </div>
  
    <ng-container *ngIf="products$ | async as products">
      <div class="card shadow-2 border-round surface-card p-3">
        <p-table
          #table
          [value]="products"
          [paginator]="true"
          [rows]="6"
          [globalFilterFields]="['name', 'price', 'stock']"
          [resizableColumns]="true"
          [scrollable]="true"
          scrollHeight="400px"
          responsiveLayout="scroll"
          sortMode="multiple">
  
          <ng-template pTemplate="caption">
            <div class="flex justify-content-between align-items-center mb-3">
              <span class="text-lg font-semibold text-900">Lista de Productos</span>
              <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                  pInputText
                  type="text"
                  (input)="onGlobalFilter($event, table)"
                  placeholder="Buscar global..."
                  class="w-20rem" />
              </span>
            </div>
          </ng-template>
  
          <ng-template pTemplate="header">
            <tr>
              <th pResizableColumn pSortableColumn="name">
                Nombre
                <input pInputText type="text" pColumnFilter field="name" placeholder="Filtrar..." class="p-column-filter w-full" />
                <p-sortIcon field="name"></p-sortIcon>
              </th>
              <th pResizableColumn pSortableColumn="price">
                Precio
                <input pInputText type="text" pColumnFilter field="price" placeholder="Filtrar..." class="p-column-filter w-full" />
                <p-sortIcon field="price"></p-sortIcon>
              </th>
              <th pResizableColumn pSortableColumn="stock">
                Stock
                <input pInputText type="text" pColumnFilter field="stock" placeholder="Filtrar..." class="p-column-filter w-full" />
                <p-sortIcon field="stock"></p-sortIcon>
              </th>
              <th>Acciones</th>
            </tr>
          </ng-template>
  
          <ng-template pTemplate="body" let-product>
            <tr>
              <td>{{ product.name }}</td>
              <td>{{ product.price }}</td>
              <td>{{ product.stock }}</td>
              <td>
                <button pButton icon="pi pi-pencil" class="p-button-text p-button-sm p-button-rounded" (click)="editProduct(product)"></button>
                <button pButton icon="pi pi-trash" class="p-button-text p-button-sm p-button-danger p-button-rounded" (click)="deleteProduct(product.id)"></button>
              </td>
            </tr>
          </ng-template>
  
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="4" class="text-center text-500">No hay productos para mostrar.</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </ng-container>
  
    <app-product-form
      [visible]="displayForm"
      [product]="selectedProduct"
      (close)="onFormClose($event)">
    </app-product-form>
  </div>
  